{"version":3,"sources":["main.js"],"names":["devMode","openNotifyApi","dataFetchInterval","map","OpenLayers","Map","markers","Layer","Markers","issMarker","addLayer","data","latitude","longitude","drawMap","drawDetails","getData","setInterval","fetch","then","response","json","iss_position","drawMarker","lonLat","size","Size","offset","Pixel","w","h","icon","Icon","removeMarker","Marker","addMarker","position","OSM","LonLat","transform","Projection","getProjectionObject","zoom","setCenter","document","querySelector","innerHTML"],"mappings":"AAAA,IAAMA,OAAO,GAAG,IAAhB,EAAsB;;AACtB,IAAMC,aAAa,GAAG,yCAAtB;AACA,IAAMC,iBAAiB,GAAG,KAA1B;AACA,IAAMC,GAAG,GAAG,IAAIC,UAAU,CAACC,GAAf,CAAmB,QAAnB,CAAZ;AACA,IAAMC,OAAO,GAAG,IAAIF,UAAU,CAACG,KAAX,CAAiBC,OAArB,CAA6B,SAA7B,CAAhB;AACA,IAAIC,SAAJ;AACAN,GAAG,CAACO,QAAJ,CAAaJ,OAAb;;AAEA,IAAIN,OAAJ,EAAa;AACZ,MAAMW,IAAI,GAAG;AAAEC,IAAAA,QAAQ,EAAE,SAAZ;AAAuBC,IAAAA,SAAS,EAAE;AAAlC,GAAb;AACAC,EAAAA,OAAO,CAACH,IAAD,CAAP;AACAI,EAAAA,WAAW,CAACJ,IAAD,CAAX;AACA,CAJD,MAIO;AACNK,EAAAA,OAAO;AACPC,EAAAA,WAAW,CAACD,OAAD,EAAUd,iBAAV,CAAX;AACA;;AAED,SAASc,OAAT,GAAmB;AAClBE,EAAAA,KAAK,CAACjB,aAAD,CAAL,CACEkB,IADF,CACO,UAACC,QAAD,EAAc;AACnB,WAAOA,QAAQ,CAACC,IAAT,EAAP;AACA,GAHF,EAIEF,IAJF,CAIO,UAACR,IAAD,EAAU;AACfG,IAAAA,OAAO,CAACH,IAAI,CAACW,YAAN,CAAP;AACAP,IAAAA,WAAW,CAACJ,IAAI,CAACW,YAAN,CAAX;AAEA,GARF;AASA;;AACD,SAASC,UAAT,CAAoBC,MAApB,EAA4B;AAC1B,MAAIC,IAAI,GAAG,IAAIrB,UAAU,CAACsB,IAAf,CAAoB,EAApB,EAAwB,EAAxB,CAAX;AACD,MAAIC,MAAM,GAAG,IAAIvB,UAAU,CAACwB,KAAf,CAAqB,EAAEH,IAAI,CAACI,CAAL,GAAS,CAAX,CAArB,EAAoC,CAACJ,IAAI,CAACK,CAA1C,CAAb;AACA,MAAIC,IAAI,GAAG,IAAI3B,UAAU,CAAC4B,IAAf,CAAoB,WAApB,EAAiCP,IAAjC,EAAuCE,MAAvC,CAAX;AACArB,EAAAA,OAAO,CAAC2B,YAAR,CAAqBxB,SAArB;AACAA,EAAAA,SAAS,GAAG,IAAIL,UAAU,CAAC8B,MAAf,CAAsBV,MAAtB,EAA8BO,IAA9B,CAAZ;AACAzB,EAAAA,OAAO,CAAC6B,SAAR,CAAkB1B,SAAlB;AACA;;AAED,SAASK,OAAT,CAAiBsB,QAAjB,EAA2B;AAC1BjC,EAAAA,GAAG,CAACO,QAAJ,CAAa,IAAIN,UAAU,CAACG,KAAX,CAAiB8B,GAArB,EAAb;AAEA,MAAMb,MAAM,GAAG,IAAIpB,UAAU,CAACkC,MAAf,CAAsBF,QAAQ,CAACvB,SAA/B,EAA0CuB,QAAQ,CAACxB,QAAnD,EACb2B,SADa,CAEb,IAAInC,UAAU,CAACoC,UAAf,CAA0B,WAA1B,CAFa,EAGbrC,GAAG,CAACsC,mBAAJ,EAHa,CAAf;AAMA,MAAMC,IAAI,GAAG,CAAb;AACAnB,EAAAA,UAAU,CAACC,MAAD,CAAV;AACArB,EAAAA,GAAG,CAACwC,SAAJ,CAAcnB,MAAd,EAAsBkB,IAAtB;AACA;;AAED,SAAS3B,WAAT,CAAqBqB,QAArB,EAA+B;AAC9BQ,EAAAA,QAAQ,CAACC,aAAT,CAAuB,WAAvB,EAAoCC,SAApC,qBAA4DV,QAAQ,CAACxB,QAArE,qBAAwFwB,QAAQ,CAACvB,SAAjG;AACA","file":"main.1f19ae8e.js","sourceRoot":"..","sourcesContent":["const devMode = true; // use mocked lat long so we don't spam the API\nconst openNotifyApi = 'http://api.open-notify.org/iss-now.json';\nconst dataFetchInterval = 30000;\nconst map = new OpenLayers.Map(\"mapdiv\");\nconst markers = new OpenLayers.Layer.Markers(\"Markers\");\nlet issMarker;\nmap.addLayer(markers);\n\nif (devMode) {\n\tconst data = { latitude: \"-6.7052\", longitude: \"46.7854\" };\n\tdrawMap(data);\n\tdrawDetails(data);\n} else {\n\tgetData();\n\tsetInterval(getData, dataFetchInterval);\n}\n\nfunction getData() {\n\tfetch(openNotifyApi)\n\t\t.then((response) => {\n\t\t\treturn response.json();\n\t\t})\n\t\t.then((data) => {\n\t\t\tdrawMap(data.iss_position);\n\t\t\tdrawDetails(data.iss_position);\n\n\t\t});\n}\nfunction drawMarker(lonLat) {\n \tvar size = new OpenLayers.Size(25, 25);\n\tvar offset = new OpenLayers.Pixel(-(size.w / 2), -size.h);\n\tvar icon = new OpenLayers.Icon('./ISS.svg', size, offset);\n\tmarkers.removeMarker(issMarker);\n\tissMarker = new OpenLayers.Marker(lonLat, icon);\n\tmarkers.addMarker(issMarker);\n}\n\nfunction drawMap(position) {\n\tmap.addLayer(new OpenLayers.Layer.OSM());\n\n\tconst lonLat = new OpenLayers.LonLat(position.longitude, position.latitude)\n\t\t.transform(\n\t\t\tnew OpenLayers.Projection(\"EPSG:4326\"),\n\t\t\tmap.getProjectionObject()\n\t\t);\n\n\tconst zoom = 1;\n\tdrawMarker(lonLat);\n\tmap.setCenter(lonLat, zoom);\n}\n\nfunction drawDetails(position) {\n\tdocument.querySelector('#location').innerHTML = (`<p>lat: ${position.latitude}, long: ${position.longitude}</p>`);\n}\n"]}